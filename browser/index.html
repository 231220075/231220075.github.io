<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ğŸ¤– AI æ™ºèƒ½åŠ©æ‰‹ | Summer Flower</title><meta name="author" content="forever"><meta name="copyright" content="forever"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="ä¸AIåŠ©æ‰‹èŠå¤©ï¼Œè·å¾—æ™ºèƒ½å›ç­”å’Œå¸®åŠ©">
<meta property="og:type" content="website">
<meta property="og:title" content="ğŸ¤– AI æ™ºèƒ½åŠ©æ‰‹">
<meta property="og:url" content="http://summer-flower.com/browser/index.html">
<meta property="og:site_name" content="Summer Flower">
<meta property="og:description" content="ä¸AIåŠ©æ‰‹èŠå¤©ï¼Œè·å¾—æ™ºèƒ½å›ç­”å’Œå¸®åŠ©">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://summer-flower.com/photos/avatar.jpg">
<meta property="article:published_time" content="2025-08-21T16:00:00.000Z">
<meta property="article:modified_time" content="2025-08-22T01:53:33.779Z">
<meta property="article:author" content="forever">
<meta property="article:tag" content="life cs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://summer-flower.com/photos/avatar.jpg"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://summer-flower.com/browser/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/img/favicon.ico"/><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon.ico"/><link rel="mask-icon" href="/img/favicon.ico" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 18
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "su3jybron2");
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ğŸ¤– AI æ™ºèƒ½åŠ©æ‰‹',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'page'
}</script><script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Summer Flower" type="application/atom+xml">
</head><body><div id="web_bg" style="background-image: url(/url(/source/photos/arknight.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/photos/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/photos-gallery/"><i class="fa-fw fas fa-camera"></i><span> Photos</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/sitemap/"><i class="fa-fw fas fa-sitemap"></i><span> Sitemap</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> Comments</span></a></div><div class="menus_item"><a class="site-page" href="/browser/"><i class="fa-fw fas fa-robot"></i><span> AI Assistant</span></a></div></div></div></div><div class="page type-browser" id="body-wrap"><header class="not-home-page" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Summer Flower</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/photos-gallery/"><i class="fa-fw fas fa-camera"></i><span> Photos</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/sitemap/"><i class="fa-fw fas fa-sitemap"></i><span> Sitemap</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> Comments</span></a></div><div class="menus_item"><a class="site-page" href="/browser/"><i class="fa-fw fas fa-robot"></i><span> AI Assistant</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="page-site-info"><h1 id="site-title">ğŸ¤– AI æ™ºèƒ½åŠ©æ‰‹</h1></div></header><main class="layout" id="content-inner"><div id="page"><div class="ai-chat-container"><div class="chat-header"><div class="chat-controls"><div class="chat-title"><h2>ğŸ¤– AI Assistant</h2><div class="status-indicator"><span class="status-dot online"></span><span class="status-text">åœ¨çº¿</span></div></div><div class="chat-settings"><select id="aiProvider"><option value="siliconcloud">ç¡…åŸºæµåŠ¨ (å…è´¹API)</option><option value="demo">æ¼”ç¤ºæ¨¡å¼</option></select><button id="settingsBtn">âš™ï¸</button><button id="clearChatBtn">ğŸ—‘ï¸</button></div></div></div><div class="chat-messages" id="chatMessages"><div class="welcome-message"><div class="message-content"><h3>ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ AI åŠ©æ‰‹ï¼</h3><p>æˆ‘å¯ä»¥å¸®åŠ©æ‚¨ï¼š</p><ul><li>ğŸ’¬ å›ç­”å„ç§é—®é¢˜</li><li>ğŸ’¡ æä¾›åˆ›æ„å»ºè®®  </li><li>ğŸ“ ååŠ©å†™ä½œå’Œç¼–ç¨‹</li><li>ğŸ” è§£é‡Šå¤æ‚æ¦‚å¿µ</li><li>ğŸŒ ç¿»è¯‘å¤šç§è¯­è¨€</li></ul><div class="quick-prompts"><button class="prompt-btn" data-prompt="ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±">ğŸ‘‹ æ‰“ä¸ªæ‹›å‘¼</button><button class="prompt-btn" data-prompt="å¸®æˆ‘å†™ä¸€ä¸ªPythonçš„Hello Worldç¨‹åº">ğŸ’» ç¼–ç¨‹ç¤ºä¾‹</button><button class="prompt-btn" data-prompt="è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ">ğŸ§  å­¦ä¹ æ¦‚å¿µ</button><button class="prompt-btn" data-prompt="æ¨èä¸€äº›å­¦ä¹ ç¼–ç¨‹çš„ç½‘ç«™">ğŸ“š å­¦ä¹ èµ„æº</button></div></div></div></div><div class="chat-input-area"><div class="input-group"><textarea id="messageInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." rows="1"></textarea><button id="sendBtn"><span class="send-icon">ğŸ“¤</span></button></div><div class="input-options"><div class="left-options"><button id="voiceBtn">ğŸ¤</button><button id="imageBtn">ğŸ“¸</button><label class="file-upload"><input type="file" id="fileInput" accept="image/*,.pdf,.txt,.doc,.docx" multiple><span>ğŸ“</span></label></div><div class="right-options"><div class="char-count"><span id="charCount">0</span><span>/2000</span></div><button id="modelInfo">â„¹ï¸</button></div></div></div></div><style>.ai-chat-container {
    max-width: 100%;
    margin: 0 auto;
    background: #ffffff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0,0,0,0.12);
    border: 1px solid #e1e5e9;
}

.chat-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
    color: white;
}

.chat-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.chat-title {
    display: flex;
    align-items: center;
    gap: 15px;
}

.chat-title h2 {
    margin: 0;
    font-size: 24px;
    font-weight: 600;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    font-size: 12px;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #4ade80;
    animation: pulse 2s infinite;
}

.status-dot.offline {
    background: #ef4444;
}

.status-dot.connecting {
    background: #f59e0b;
}

.chat-settings {
    display: flex;
    align-items: center;
    gap: 10px;
}

.chat-settings select {
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    font-size: 14px;
    cursor: pointer;
}

.chat-settings button {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chat-settings button:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.chat-messages {
    height: 600px;
    overflow-y: auto;
    padding: 20px;
    background: #f8fafc;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.welcome-message {
    background: white;
    border-radius: 16px;
    padding: 24px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.welcome-message h3 {
    margin: 0 0 16px 0;
    color: #1e293b;
    font-size: 20px;
    font-weight: 600;
}

.welcome-message p {
    margin: 0 0 12px 0;
    color: #64748b;
    line-height: 1.6;
}

.welcome-message ul {
    margin: 0 0 20px 0;
    padding-left: 20px;
    color: #64748b;
}

.welcome-message li {
    margin-bottom: 8px;
    line-height: 1.5;
}

.quick-prompts {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin-top: 20px;
}

.prompt-btn {
    padding: 12px 16px;
    border: 1px solid #e2e8f0;
    background: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 14px;
    color: #374151;
    transition: all 0.3s ease;
    text-align: left;
    line-height: 1.4;
}

.prompt-btn:hover {
    background: #667eea;
    color: white;
    border-color: #667eea;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.message {
    display: flex;
    margin-bottom: 16px;
    animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message.user {
    justify-content: flex-end;
}

.message.assistant {
    justify-content: flex-start;
}

.message-bubble {
    max-width: 80%;
    padding: 16px 20px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.5;
    word-wrap: break-word;
    position: relative;
}

.message.user .message-bubble {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-bottom-right-radius: 6px;
}

.message.assistant .message-bubble {
    background: white;
    color: #374151;
    border: 1px solid #e2e8f0;
    border-bottom-left-radius: 6px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.message-time {
    font-size: 11px;
    opacity: 0.7;
    margin-top: 8px;
    text-align: center;
}

.typing-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 16px 20px;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 18px;
    border-bottom-left-radius: 6px;
    max-width: 80px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.typing-dots {
    display: flex;
    gap: 4px;
}

.typing-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #9ca3af;
    animation: typingAnimation 1.4s infinite;
}

.typing-dot:nth-child(2) {
    animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typingAnimation {
    0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.4;
    }
    30% {
        transform: translateY(-10px);
        opacity: 1;
    }
}

.chat-input-area {
    padding: 20px;
    background: white;
    border-top: 1px solid #e2e8f0;
}

.input-group {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    padding: 12px;
    transition: all 0.3s ease;
}

.input-group:focus-within {
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

#messageInput {
    flex: 1;
    border: none;
    background: transparent;
    resize: none;
    outline: none;
    font-size: 15px;
    color: #374151;
    min-height: 24px;
    max-height: 120px;
    line-height: 1.5;
    font-family: inherit;
}

#messageInput::placeholder {
    color: #9ca3af;
}

#sendBtn {
    width: 44px;
    height: 44px;
    border: none;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 18px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

#sendBtn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

#sendBtn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.input-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
    padding: 0 4px;
}

.left-options, .right-options {
    display: flex;
    align-items: center;
    gap: 8px;
}

.left-options button, .file-upload {
    width: 36px;
    height: 36px;
    border: 1px solid #e2e8f0;
    background: white;
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
    color: #6b7280;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.left-options button:hover, .file-upload:hover {
    background: #f3f4f6;
    border-color: #d1d5db;
}

.file-upload input {
    display: none;
}

.char-count {
    font-size: 12px;
    color: #9ca3af;
}

#modelInfo {
    width: 36px;
    height: 36px;
    border: 1px solid #e2e8f0;
    background: white;
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
    color: #6b7280;
    transition: all 0.3s ease;
}

#modelInfo:hover {
    background: #f3f4f6;
    border-color: #d1d5db;
}

.error-message {
    background: #fef2f2;
    color: #dc2626;
    border: 1px solid #fecaca;
    border-radius: 12px;
    padding: 12px 16px;
    margin: 16px 0;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.success-message {
    background: #f0fdf4;
    color: #16a34a;
    border: 1px solid #bbf7d0;
    border-radius: 12px;
    padding: 12px 16px;
    margin: 16px 0;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.code-block {
    background: #1f2937;
    color: #f9fafb;
    border-radius: 8px;
    padding: 16px;
    margin: 12px 0;
    overflow-x: auto;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 14px;
    line-height: 1.5;
}

.code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px solid #374151;
}

.copy-btn {
    background: #374151;
    color: #d1d5db;
    border: none;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.3s ease;
}

.copy-btn:hover {
    background: #4b5563;
}

@media (max-width: 768px) {
    .chat-controls {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }
    
    .chat-messages {
        height: 400px;
        padding: 16px;
    }
    
    .quick-prompts {
        grid-template-columns: 1fr;
    }
    
    .message-bubble {
        max-width: 95%;
    }
    
    .input-group {
        padding: 10px;
    }
    
    .input-options {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
.chat-messages::-webkit-scrollbar {
    width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
    background: #f1f5f9;
}

.chat-messages::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}
</style><script>document.addEventListener('DOMContentLoaded', function() {
    // AI èŠå¤©åº”ç”¨
    class AIChatApp {
        constructor() {
            this.chatMessages = document.getElementById('chatMessages');
            this.messageInput = document.getElementById('messageInput');
            this.sendBtn = document.getElementById('sendBtn');
            this.aiProvider = document.getElementById('aiProvider');
            this.clearChatBtn = document.getElementById('clearChatBtn');
            this.settingsBtn = document.getElementById('settingsBtn');
            this.charCount = document.getElementById('charCount');
            this.voiceBtn = document.getElementById('voiceBtn');
            this.imageBtn = document.getElementById('imageBtn');
            this.fileInput = document.getElementById('fileInput');
            this.modelInfo = document.getElementById('modelInfo');
            
            this.messages = [];
            this.isTyping = false;
            this.apiSettings = this.loadAPISettings();
            
            this.initEventListeners();
            this.initQuickPrompts();
            this.updateCharCount();
            this.checkAPIAvailability();
        }
        
        loadAPISettings() {
            const saved = localStorage.getItem('ai-chat-settings');
            if (saved) {
                return JSON.parse(saved);
            }
            return {
                siliconcloud: { 
                    apiKey: 'sk-xwwnwycjglcndwbtdlqmqyazrdeqgigffjaggrzrkmvoxjvc', 
                    model: 'Qwen/Qwen3-8B', 
                    baseURL: 'https://api.siliconflow.cn' 
                }
            };
        }
        
        saveAPISettings() {
            localStorage.setItem('ai-chat-settings', JSON.stringify(this.apiSettings));
        }
        
        async checkAPIAvailability() {
            const statusDot = document.querySelector('.status-dot');
            const statusText = document.querySelector('.status-text');
            
            try {
                const provider = this.aiProvider.value;
                if (provider === 'demo') {
                    statusDot.className = 'status-dot online';
                    statusText.textContent = 'æ¼”ç¤ºæ¨¡å¼';
                    return;
                }
                
                // ç®€å•çš„å¯ç”¨æ€§æ£€æŸ¥
                const isAvailable = await this.testConnection(provider);
                if (isAvailable) {
                    statusDot.className = 'status-dot online';
                    statusText.textContent = 'å·²è¿æ¥';
                } else {
                    statusDot.className = 'status-dot offline';
                    statusText.textContent = 'æœªé…ç½®';
                }
            } catch (error) {
                const statusDot = document.querySelector('.status-dot');
                const statusText = document.querySelector('.status-text');
                statusDot.className = 'status-dot offline';
                statusText.textContent = 'è¿æ¥å¤±è´¥';
            }
        }
        
        async testConnection(provider) {
            const settings = this.apiSettings[provider];
            if (!settings) return false;
            
            switch (provider) {
                case 'siliconcloud':
                    return !!settings.apiKey;
                default:
                    return false;
            }
        }
        
        initEventListeners() {
            // å‘é€æ¶ˆæ¯
            this.sendBtn.addEventListener('click', () => this.sendMessage());
            
            // å›è½¦å‘é€ï¼ˆShift+Enter æ¢è¡Œï¼‰
            this.messageInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    this.sendMessage();
                }
            });
            
            // è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦
            this.messageInput.addEventListener('input', () => {
                this.updateCharCount();
                this.autoResizeTextarea();
            });
            
            // æ¸…ç©ºèŠå¤©
            this.clearChatBtn.addEventListener('click', () => this.clearChat());
            
            // è®¾ç½®æŒ‰é’®
            this.settingsBtn.addEventListener('click', () => this.showSettings());
            
            // AI æä¾›å•†åˆ‡æ¢
            this.aiProvider.addEventListener('change', () => this.onProviderChange());
            
            // è¯­éŸ³è¾“å…¥
            this.voiceBtn.addEventListener('click', () => this.startVoiceInput());
            
            // å›¾ç‰‡ä¸Šä¼ 
            this.imageBtn.addEventListener('click', () => this.fileInput.click());
            this.fileInput.addEventListener('change', () => this.handleFileUpload());
            
            // æ¨¡å‹ä¿¡æ¯
            this.modelInfo.addEventListener('click', () => this.showModelInfo());
        }
        
        initQuickPrompts() {
            const promptBtns = document.querySelectorAll('.prompt-btn');
            promptBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const prompt = btn.getAttribute('data-prompt');
                    this.messageInput.value = prompt;
                    this.updateCharCount();
                    this.sendMessage();
                });
            });
        }
        
        updateCharCount() {
            const count = this.messageInput.value.length;
            this.charCount.textContent = count;
            
            if (count > 1800) {
                this.charCount.style.color = '#dc2626';
            } else if (count > 1500) {
                this.charCount.style.color = '#f59e0b';
            } else {
                this.charCount.style.color = '#9ca3af';
            }
        }
        
        autoResizeTextarea() {
            this.messageInput.style.height = 'auto';
            this.messageInput.style.height = Math.min(this.messageInput.scrollHeight, 120) + 'px';
        }
        
        async sendMessage() {
            const message = this.messageInput.value.trim();
            if (!message || this.isTyping) return;
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            this.addMessage('user', message);
            this.messageInput.value = '';
            this.updateCharCount();
            this.autoResizeTextarea();
            
            // æ˜¾ç¤ºæ­£åœ¨è¾“å…¥
            this.showTyping();
            
            try {
                // åˆ›å»ºAIå›å¤æ¶ˆæ¯å®¹å™¨
                const aiMessageDiv = this.createStreamingMessage();
                let fullResponse = '';
                
                // å®šä¹‰æµå¼å›è°ƒå‡½æ•°
                const onChunk = (chunk) => {
                    fullResponse += chunk;
                    this.updateStreamingMessage(aiMessageDiv, fullResponse);
                };
                
                // è·å–AIå“åº”ï¼ˆæµå¼ï¼‰
                const response = await this.getAIResponse(message, onChunk);
                
                // å¦‚æœæ²¡æœ‰æµå¼å†…å®¹ï¼Œä½¿ç”¨å®Œæ•´å“åº”
                if (!fullResponse && response) {
                    fullResponse = response;
                    this.updateStreamingMessage(aiMessageDiv, fullResponse);
                }
                
                // å®Œæˆæµå¼è¾“å‡ºï¼Œä¿å­˜æ¶ˆæ¯
                this.finalizeStreamingMessage(aiMessageDiv, fullResponse);
                this.hideTyping();
            } catch (error) {
                this.hideTyping();
                this.addMessage('assistant', 'æŠ±æ­‰ï¼Œæˆ‘ç°åœ¨æ— æ³•å›ç­”æ‚¨çš„é—®é¢˜ã€‚è¯·ç¨åå†è¯•ã€‚', true);
                console.error('AI å›å¤é”™è¯¯:', error);
            }
        }
        
        addMessage(role, content, isError = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            let messageHTML = '';
            if (role === 'user') {
                messageHTML = `
                    <div class="message-bubble">
                        ${this.formatMessage(content)}
                        <div class="message-time">${timeStr}</div>
                    </div>
                `;
            } else {
                messageHTML = `
                    <div class="message-bubble ${isError ? 'error' : ''}">
                        ${this.formatMessage(content)}
                        <div class="message-time">${timeStr}</div>
                    </div>
                `;
            }
            
            messageDiv.innerHTML = messageHTML;
            
            // ç§»é™¤æ¬¢è¿æ¶ˆæ¯
            const welcomeMsg = this.chatMessages.querySelector('.welcome-message');
            if (welcomeMsg && this.messages.length === 0) {
                welcomeMsg.remove();
            }
            
            this.chatMessages.appendChild(messageDiv);
            this.messages.push({ role, content, timestamp: now });
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            this.scrollToBottom();
        }
        
        formatMessage(content) {
            // å…ˆè½¬ä¹‰HTMLç‰¹æ®Šå­—ç¬¦ï¼ˆé™¤äº†ç”¨äºæ ¼å¼åŒ–çš„ç‰¹æ®Šæ ‡è®°ï¼‰
            content = content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            
            // å¤„ç†ä»£ç å—
            content = content.replace(/```([\s\S]*?)```/g, (match, code) => {
                const lines = code.split('\n');
                const lang = lines[0] || '';
                const actualCode = lines.length > 1 ? lines.slice(1).join('\n') : code;
                
                // å®‰å…¨åœ°è½¬ä¹‰ä»£ç å†…å®¹
                const escapedCode = actualCode.replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>');
                const safeCode = this.escapeHtml(escapedCode);
                const copyCode = escapedCode.replace(/'/g, "\\'").replace(/"/g, '\\"');
                
                return `
                    <div class="code-block">
                        <div class="code-header">
                            <span>${this.escapeHtml(lang)}</span>
                            <button class="copy-btn" onclick="navigator.clipboard.writeText('${copyCode}')">å¤åˆ¶</button>
                        </div>
                        <pre><code>${safeCode}</code></pre>
                    </div>
                `;
            });
            
            // å¤„ç†è¡Œå†…ä»£ç ï¼ˆç¡®ä¿ä¸ä¼šå½±å“å·²å¤„ç†çš„ä»£ç å—ï¼‰
            content = content.replace(/`([^`\n]+)`/g, '<code style="background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 0.9em;">$1</code>');
            
            // å¤„ç†æ¢è¡Œ
            content = content.replace(/\n/g, '<br>');
            
            return content;
        }
        
        escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        showTyping() {
            this.isTyping = true;
            this.sendBtn.disabled = true;
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message assistant';
            typingDiv.innerHTML = `
                <div class="typing-indicator">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            typingDiv.id = 'typing-indicator';
            
            this.chatMessages.appendChild(typingDiv);
            this.scrollToBottom();
        }
        
        hideTyping() {
            this.isTyping = false;
            this.sendBtn.disabled = false;
            
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        createStreamingMessage() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message assistant';
            
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.innerHTML = `
                <div class="message-bubble">
                    <div class="streaming-content"></div>
                    <div class="message-time">${timeStr}</div>
                </div>
            `;
            
            // ç§»é™¤æ¬¢è¿æ¶ˆæ¯
            const welcomeMsg = this.chatMessages.querySelector('.welcome-message');
            if (welcomeMsg && this.messages.length === 0) {
                welcomeMsg.remove();
            }
            
            this.chatMessages.appendChild(messageDiv);
            this.scrollToBottom();
            
            return messageDiv;
        }
        
        updateStreamingMessage(messageDiv, content) {
            const contentDiv = messageDiv.querySelector('.streaming-content');
            if (contentDiv) {
                // ä½¿ç”¨å®‰å…¨çš„æµå¼æ ¼å¼åŒ–
                contentDiv.innerHTML = this.formatStreamingMessage(content);
                this.scrollToBottom();
            }
        }
        
        finalizeStreamingMessage(messageDiv, content) {
            const now = new Date();
            const contentDiv = messageDiv.querySelector('.streaming-content');
            if (contentDiv) {
                // ä½¿ç”¨å®Œæ•´çš„æ ¼å¼åŒ–æ–¹æ³•
                contentDiv.innerHTML = this.formatMessage(content);
            }
            this.messages.push({ role: 'assistant', content, timestamp: now });
        }
        
        formatStreamingMessage(content) {
            // æ£€æŸ¥æ˜¯å¦æœ‰æœªå®Œæˆçš„ä»£ç å—
            const codeBlockMatches = content.match(/```/g);
            const hasIncompleteCodeBlock = codeBlockMatches && codeBlockMatches.length % 2 !== 0;
            
            if (hasIncompleteCodeBlock) {
                // å¦‚æœæœ‰æœªå®Œæˆçš„ä»£ç å—ï¼Œåªè¿›è¡ŒåŸºæœ¬çš„HTMLè½¬ä¹‰å’Œæ¢è¡Œå¤„ç†
                const escaped = content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                return escaped.replace(/\n/g, '<br>');
            } else {
                // å¦‚æœä»£ç å—å®Œæ•´ï¼Œè¿›è¡Œå®Œæ•´æ ¼å¼åŒ–
                return this.formatMessage(content);
            }
        }
        
        async getAIResponse(message, onChunk = null) {
            const provider = this.aiProvider.value;
            
            try {
                switch (provider) {
                    case 'siliconcloud':
                        return await this.callSiliconCloud(message, onChunk);
                    default:
                        return this.getDemoResponse(message, onChunk);
                }
            } catch (error) {
                console.error('API è°ƒç”¨å¤±è´¥:', error);
                return `æŠ±æ­‰ï¼Œè°ƒç”¨ ${provider} API æ—¶å‡ºç°é”™è¯¯ï¼š${error.message}ã€‚è¯·æ£€æŸ¥APIé…ç½®æˆ–ç½‘ç»œè¿æ¥ã€‚`;
            }
        }
        
        async callSiliconCloud(message, onChunk = null) {
            const settings = this.apiSettings.siliconcloud;
            if (!settings.apiKey) {
                throw new Error('è¯·åœ¨è®¾ç½®ä¸­é…ç½®ç¡…åŸºæµåŠ¨ API Key');
            }
            
            const response = await fetch(`${settings.baseURL}/v1/chat/completions`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${settings.apiKey}`
                },
                body: JSON.stringify({
                    model: settings.model,
                    messages: [
                        { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹ï¼Œè¯·ç”¨ä¸­æ–‡å›ç­”é—®é¢˜ã€‚' },
                        ...this.messages.slice(-10).map(m => ({ role: m.role === 'assistant' ? 'assistant' : 'user', content: m.content })),
                        { role: 'user', content: message }
                    ],
                    temperature: 0.7,
                    stream: !!onChunk
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            // å¦‚æœæ˜¯æµå¼å“åº”
            if (onChunk) {
                const reader = response.body.getReader();
                const decoder = new TextDecoder();
                let buffer = '';
                
                try {
                    while (true) {
                        const { done, value } = await reader.read();
                        if (done) break;
                        
                        buffer += decoder.decode(value, { stream: true });
                        const lines = buffer.split('\n');
                        buffer = lines.pop() || '';
                        
                        for (const line of lines) {
                            if (line.startsWith('data: ')) {
                                const data = line.slice(6);
                                if (data === '[DONE]') return;
                                
                                try {
                                    const chunk = JSON.parse(data);
                                    const content = chunk.choices?.[0]?.delta?.content;
                                    if (content) {
                                        onChunk(content);
                                    }
                                } catch (e) {
                                    // å¿½ç•¥è§£æé”™è¯¯
                                }
                            }
                        }
                    }
                } finally {
                    reader.releaseLock();
                }
                return '';
            } else {
                // éæµå¼å“åº”
                const data = await response.json();
                return data.choices[0].message.content;
            }
        }
        
        async callClaude(message, onChunk = null) {
            const settings = this.apiSettings.claude;
            if (!settings.apiKey) {
                throw new Error('è¯·åœ¨è®¾ç½®ä¸­é…ç½® Claude API Key');
            }
            
            const response = await fetch(`${settings.baseURL}/v1/messages`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': settings.apiKey,
                    'anthropic-version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: settings.model,
                    messages: [
                        ...this.messages.slice(-10).map(m => ({ role: m.role === 'assistant' ? 'assistant' : 'user', content: m.content })),
                        { role: 'user', content: message }
                    ]
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return data.content[0].text;
        }
        
        async callGemini(message, onChunk = null) {
            // ä½¿ç”¨å…è´¹çš„ Gemini API
            const apiKey = this.apiSettings.gemini.apiKey || 'demo-key'; // å¯ä»¥ä½¿ç”¨å…è´¹é…é¢
            const settings = this.apiSettings.gemini;
            
            const response = await fetch(`${settings.baseURL}/models/${settings.model}:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: `ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹ï¼Œè¯·ç”¨ä¸­æ–‡å›ç­”é—®é¢˜ã€‚ç”¨æˆ·é—®é¢˜ï¼š${message}`
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.7
                    }
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }
        
        async callOllama(message, onChunk = null) {
            const settings = this.apiSettings.ollama;
            
            const response = await fetch(`${settings.baseURL}/api/generate`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: settings.model,
                    prompt: `ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹ï¼Œè¯·ç”¨ä¸­æ–‡å›ç­”é—®é¢˜ã€‚ç”¨æˆ·é—®é¢˜ï¼š${message}`,
                    stream: false
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return data.response;
        }
        
        async callHuggingFace(message, onChunk = null) {
            const settings = this.apiSettings.huggingface;
            
            const response = await fetch(`${settings.baseURL}/${settings.model}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': settings.apiKey ? `Bearer ${settings.apiKey}` : undefined
                },
                body: JSON.stringify({
                    inputs: message,
                    parameters: {
                        temperature: 0.7
                    }
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return Array.isArray(data) ? data[0].generated_text : data.generated_text;
        }
        
        async getDemoResponse(message, onChunk = null) {
            // ä¿æŒåŸæœ‰çš„æ¼”ç¤ºå“åº”é€»è¾‘
            const responses = [
                `æˆ‘ç†è§£æ‚¨çš„é—®é¢˜ï¼š"${message}"ã€‚ä½œä¸º AI åŠ©æ‰‹ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚è¿™æ˜¯æ¼”ç¤ºæ¨¡å¼ï¼Œè¦è·å¾—çœŸå®çš„AIå›å¤ï¼Œè¯·é…ç½®APIå¯†é’¥ã€‚`,
                `è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ï¼å…³äº"${message}"ï¼Œåœ¨æ¼”ç¤ºæ¨¡å¼ä¸‹æˆ‘åªèƒ½æä¾›æ¨¡æ‹Ÿå›å¤ã€‚è¦ä½“éªŒçœŸæ­£çš„AIå¯¹è¯ï¼Œè¯·é…ç½®ç›¸åº”çš„APIæœåŠ¡ã€‚`,
                `æ„Ÿè°¢æ‚¨çš„æé—®ã€‚è®©æˆ‘æ¥åˆ†æä¸€ä¸‹"${message}"è¿™ä¸ªè¯é¢˜ã€‚æ³¨æ„ï¼šå½“å‰ä¸ºæ¼”ç¤ºæ¨¡å¼ï¼Œå®é™…ä½¿ç”¨è¯·é…ç½®APIå¯†é’¥ã€‚`
            ];
            
            let response;
            if (message.includes('ç¼–ç¨‹') || message.includes('ä»£ç ') || message.includes('Python')) {
                response = `å…³äºç¼–ç¨‹é—®é¢˜ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Python ç¤ºä¾‹ï¼š\n\n\`\`\`python\n# Hello World ç¨‹åº\nprint("Hello, World!")\n\n# ç®€å•çš„å‡½æ•°å®šä¹‰\ndef greet(name):\n    return f"ä½ å¥½, {name}!"\n\n# è°ƒç”¨å‡½æ•°\nresult = greet("å¼€å‘è€…")\nprint(result)\n\`\`\`\n\nè¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº† Python çš„åŸºæœ¬è¯­æ³•å’Œå‡½æ•°å®šä¹‰ã€‚\n\n**æ³¨æ„ï¼šå½“å‰ä¸ºæ¼”ç¤ºæ¨¡å¼ï¼Œè¦è·å¾—æ›´æ™ºèƒ½çš„ç¼–ç¨‹å¸®åŠ©ï¼Œè¯·é…ç½®çœŸå®çš„AI APIã€‚**`;
            } else {
                response = responses[Math.floor(Math.random() * responses.length)];
            }
            
            // å¦‚æœæœ‰æµå¼å›è°ƒï¼Œæ¨¡æ‹Ÿæµå¼è¾“å‡º
            if (onChunk) {
                const chunks = response.split('');
                for (let i = 0; i < chunks.length; i++) {
                    await new Promise(resolve => setTimeout(resolve, 30)); // 30mså»¶è¿Ÿæ¨¡æ‹Ÿæµå¼æ•ˆæœ
                    onChunk(chunks.slice(0, i + 1).join(''));
                }
                return '';
            }
            
            return response;
        }
        
        getChatGPTResponse(message) {
            const responses = [
                `æˆ‘ç†è§£æ‚¨çš„é—®é¢˜ï¼š"${message}"ã€‚ä½œä¸º AI åŠ©æ‰‹ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚`,
                `è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ï¼å…³äº"${message}"ï¼Œæˆ‘å¯ä»¥åˆ†äº«ä¸€äº›è§è§£...`,
                `æ„Ÿè°¢æ‚¨çš„æé—®ã€‚è®©æˆ‘æ¥åˆ†æä¸€ä¸‹"${message}"è¿™ä¸ªè¯é¢˜ã€‚`,
                `æˆ‘æ˜ç™½äº†æ‚¨æƒ³äº†è§£å…³äº"${message}"çš„ä¿¡æ¯ã€‚è®©æˆ‘ä¸ºæ‚¨è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚`
            ];
            
            if (message.includes('ç¼–ç¨‹') || message.includes('ä»£ç ') || message.includes('Python')) {
                return `å…³äºç¼–ç¨‹é—®é¢˜ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Python ç¤ºä¾‹ï¼š\n\n\`\`\`python\n# Hello World ç¨‹åº\nprint("Hello, World!")\n\n# ç®€å•çš„å‡½æ•°å®šä¹‰\ndef greet(name):\n    return f"ä½ å¥½, {name}!"\n\n# è°ƒç”¨å‡½æ•°\nresult = greet("å¼€å‘è€…")\nprint(result)\n\`\`\`\n\nè¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº† Python çš„åŸºæœ¬è¯­æ³•å’Œå‡½æ•°å®šä¹‰ã€‚`;
            }
            
            if (message.includes('æœºå™¨å­¦ä¹ ') || message.includes('AI') || message.includes('äººå·¥æ™ºèƒ½')) {
                return `æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œå®ƒè®©è®¡ç®—æœºèƒ½å¤Ÿä»æ•°æ®ä¸­å­¦ä¹ æ¨¡å¼ï¼Œè€Œæ— éœ€æ˜ç¡®ç¼–ç¨‹ã€‚\n\nä¸»è¦ç±»å‹åŒ…æ‹¬ï¼š\nâ€¢ **ç›‘ç£å­¦ä¹ **ï¼šä½¿ç”¨æ ‡è®°æ•°æ®è®­ç»ƒæ¨¡å‹\nâ€¢ **æ— ç›‘ç£å­¦ä¹ **ï¼šå‘ç°æ•°æ®ä¸­çš„éšè—æ¨¡å¼\nâ€¢ **å¼ºåŒ–å­¦ä¹ **ï¼šé€šè¿‡å¥–åŠ±æœºåˆ¶å­¦ä¹ æœ€ä¼˜ç­–ç•¥\n\nå¸¸ç”¨ç®—æ³•æœ‰çº¿æ€§å›å½’ã€å†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œç­‰ã€‚`;
            }
            
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        getClaudeResponse(message) {
            return `æˆ‘æ˜¯ Claudeï¼Œä¸€ä¸ªç”± Anthropic å¼€å‘çš„ AI åŠ©æ‰‹ã€‚æˆ‘å¾ˆé«˜å…´èƒ½å¤Ÿå¸®åŠ©æ‚¨è§£ç­”å…³äº"${message}"çš„é—®é¢˜ã€‚æˆ‘ä¼šå°½åŠ›æä¾›å‡†ç¡®ã€æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å§‹ç»ˆä¿æŒè¯šå®å’Œæœ‰å¸®åŠ©çš„æ€åº¦ã€‚`;
        }
        
        getGeminiResponse(message) {
            return `ä½œä¸º Google çš„ Gemini æ¨¡å‹ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›å¤šæ¨¡æ€çš„å¸®åŠ©ã€‚å…³äºæ‚¨çš„é—®é¢˜"${message}"ï¼Œæˆ‘å°†ç»“åˆæˆ‘çš„çŸ¥è¯†ä¸ºæ‚¨æä¾›å…¨é¢çš„å›ç­”ã€‚æˆ‘æ“…é•¿å¤„ç†æ–‡æœ¬ã€å›¾åƒå’Œä»£ç ç­‰å¤šç§ç±»å‹çš„å†…å®¹ã€‚`;
        }
        
        getCustomResponse(message) {
            return `è¿™æ˜¯æ¥è‡ªè‡ªå®šä¹‰ AI æ¨¡å‹çš„å›å¤ã€‚æ‚¨çš„é—®é¢˜ï¼š"${message}"å·²ç»æ”¶åˆ°ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºç‰ˆæœ¬ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦é…ç½®çœŸå®çš„ API æ¥å£ã€‚`;
        }
        
        clearChat() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰èŠå¤©è®°å½•å—ï¼Ÿ')) {
                this.chatMessages.innerHTML = `
                    <div class="welcome-message">
                        <div class="message-content">
                            <h3>ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ AI åŠ©æ‰‹ï¼</h3>
                            <p>æˆ‘å¯ä»¥å¸®åŠ©æ‚¨ï¼š</p>
                            <ul>
                                <li>ğŸ’¬ å›ç­”å„ç§é—®é¢˜</li>
                                <li>ğŸ’¡ æä¾›åˆ›æ„å»ºè®®</li>
                                <li>ğŸ“ ååŠ©å†™ä½œå’Œç¼–ç¨‹</li>
                                <li>ğŸ” è§£é‡Šå¤æ‚æ¦‚å¿µ</li>
                                <li>ğŸŒ ç¿»è¯‘å¤šç§è¯­è¨€</li>
                            </ul>
                            <div class="quick-prompts">
                                <button class="prompt-btn" data-prompt="ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±">ğŸ‘‹ æ‰“ä¸ªæ‹›å‘¼</button>
                                <button class="prompt-btn" data-prompt="å¸®æˆ‘å†™ä¸€ä¸ªPythonçš„Hello Worldç¨‹åº">ğŸ’» ç¼–ç¨‹ç¤ºä¾‹</button>
                                <button class="prompt-btn" data-prompt="è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ">ğŸ§  å­¦ä¹ æ¦‚å¿µ</button>
                                <button class="prompt-btn" data-prompt="æ¨èä¸€äº›å­¦ä¹ ç¼–ç¨‹çš„ç½‘ç«™">ğŸ“š å­¦ä¹ èµ„æº</button>
                            </div>
                        </div>
                    </div>
                `;
                this.messages = [];
                this.initQuickPrompts();
            }
        }
        
        showSettings() {
            const currentProvider = this.aiProvider.value;
            const settings = this.apiSettings[currentProvider];
            
            let configHTML = '<div style="max-height: 400px; overflow-y: auto;">';
            
            switch (currentProvider) {
                case 'siliconcloud':
                    configHTML += `
                        <h3>ç¡…åŸºæµåŠ¨ é…ç½®</h3>
                        <div style="margin-bottom: 15px;">
                            <label>API Key:</label><br>
                            <input type="password" id="siliconcloud-key" value="${settings.apiKey}" style="width: 100%; padding: 8px; margin-top: 5px; background: #f5f5f5;" readonly placeholder="å·²é…ç½®å›ºå®šAPI Key">
                            <small style="color: #10b981;">âœ… APIå¯†é’¥å·²é…ç½®å®Œæˆï¼Œæ— éœ€ä¿®æ”¹</small>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label>æ¨¡å‹:</label><br>
                            <select id="siliconcloud-model" style="width: 100%; padding: 8px; margin-top: 5px;">
                                <optgroup label="ğŸ–¼ï¸ å¤šæ¨¡æ€æ¨¡å‹ (æ”¯æŒè§†è§‰/å›¾ç‰‡åˆ†æ)">
                                    <option value="THUDM/GLM-4.1V-9B-Thinking" ${settings.model === 'THUDM/GLM-4.1V-9B-Thinking' ? 'selected' : ''}>ğŸ§  GLM-4.1V-9B-Thinking (è§†è§‰+æ¨ç†)</option>
                                    <option value="Qwen/Qwen3-8B" ${settings.model === 'Qwen/Qwen3-8B' ? 'selected' : ''}>ğŸ–¼ï¸ Qwen3-8B (æœ€æ–°å¤šæ¨¡æ€)</option>
                                </optgroup>
                                <optgroup label="ğŸ§  é«˜çº§æ¨ç†æ¨¡å‹">
                                    <option value="deepseek-ai/DeepSeek-R1-0528-Qwen3-8B" ${settings.model === 'deepseek-ai/DeepSeek-R1-0528-Qwen3-8B' ? 'selected' : ''}>ğŸ”¬ DeepSeek-R1-0528-Qwen3-8B (æ¨ç†æ¨¡å‹)</option>
                                    <option value="THUDM/GLM-Z1-9B-0414" ${settings.model === 'THUDM/GLM-Z1-9B-0414' ? 'selected' : ''}>âš¡ GLM-Z1-9B-0414 (æ™ºèƒ½æ¨ç†)</option>
                                    <option value="THUDM/GLM-4-9B-0414" ${settings.model === 'THUDM/GLM-4-9B-0414' ? 'selected' : ''}>ğŸ”® GLM-4-9B-0414 (å¯¹è¯å¢å¼º)</option>
                                    <option value="deepseek-ai/DeepSeek-R1-Distill-Qwen-7B" ${settings.model === 'deepseek-ai/DeepSeek-R1-Distill-Qwen-7B' ? 'selected' : ''}>ğŸŒŠ DeepSeek-R1-Distill-Qwen-7B (è’¸é¦ç‰ˆ)</option>
                                </optgroup>
                            </select>
                        </div>
                        <p style="color: #666; font-size: 14px;">
                            ğŸ’¡ å·²é…ç½®ä¸“ç”¨APIå¯†é’¥ï¼Œæ”¯æŒæœ€æ–°æ¨¡å‹ï¼<br>
                            ğŸ–¼ï¸ é€‰æ‹©å¤šæ¨¡æ€æ¨¡å‹å¯è¿›è¡Œå›¾ç‰‡åˆ†æ<br>
                            ğŸ§  é€‰æ‹©æ¨ç†æ¨¡å‹è·å¾—æ›´å¼ºæ€ç»´èƒ½åŠ›
                        </p>
                    `;
                    break;
                case 'openai':
                    configHTML += `
                        <h3>OpenAI é…ç½®</h3>
                        <div style="margin-bottom: 15px;">
                            <label>API Key:</label><br>
                            <input type="password" id="openai-key" value="${settings.apiKey}" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="sk-...">
                            <small>è·å–åœ°å€: <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI API Keys</a></small>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label>æ¨¡å‹:</label><br>
                            <select id="openai-model" style="width: 100%; padding: 8px; margin-top: 5px;">
                                <option value="gpt-3.5-turbo" ${settings.model === 'gpt-3.5-turbo' ? 'selected' : ''}>GPT-3.5 Turbo</option>
                                <option value="gpt-4" ${settings.model === 'gpt-4' ? 'selected' : ''}>GPT-4</option>
                                <option value="gpt-4-turbo-preview" ${settings.model === 'gpt-4-turbo-preview' ? 'selected' : ''}>GPT-4 Turbo</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'claude':
                    configHTML += `
                        <h3>Claude é…ç½®</h3>
                        <div style="margin-bottom: 15px;">
                            <label>API Key:</label><br>
                            <input type="password" id="claude-key" value="${settings.apiKey}" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="sk-ant-...">
                            <small>è·å–åœ°å€: <a href="https://console.anthropic.com/" target="_blank">Anthropic Console</a></small>
                        </div>
                    `;
                    break;
                case 'gemini':
                    configHTML += `
                        <h3>Google Gemini é…ç½®</h3>
                        <div style="margin-bottom: 15px;">
                            <label>API Key (å¯é€‰ï¼Œæœ‰å…è´¹é…é¢):</label><br>
                            <input type="password" id="gemini-key" value="${settings.apiKey}" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="AIza...">
                            <small>è·å–åœ°å€: <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                        </div>
                        <p style="color: #666; font-size: 14px;">ğŸ’¡ Gemini æä¾›å…è´¹é…é¢ï¼Œæ— éœ€API Keyä¹Ÿå¯ä½¿ç”¨</p>
                    `;
                    break;
                case 'ollama':
                    configHTML += `
                        <h3>Ollama æœ¬åœ°é…ç½®</h3>
                        <div style="margin-bottom: 15px;">
                            <label>æœåŠ¡å™¨åœ°å€:</label><br>
                            <input type="text" id="ollama-url" value="${settings.baseURL}" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="http://localhost:11434">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label>æ¨¡å‹åç§°:</label><br>
                            <input type="text" id="ollama-model" value="${settings.model}" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="llama2">
                        </div>
                        <p style="color: #666; font-size: 14px;">ğŸ’¡ éœ€è¦å…ˆå®‰è£… Ollama: <a href="https://ollama.ai/" target="_blank">ollama.ai</a></p>
                    `;
                    break;
                case 'huggingface':
                    configHTML += `
                        <h3>HuggingFace é…ç½®</h3>
                        <div style="margin-bottom: 15px;">
                            <label>API Token (å¯é€‰):</label><br>
                            <input type="password" id="hf-key" value="${settings.apiKey}" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="hf_...">
                            <small>è·å–åœ°å€: <a href="https://huggingface.co/settings/tokens" target="_blank">HuggingFace Tokens</a></small>
                        </div>
                        <p style="color: #666; font-size: 14px;">ğŸ’¡ HuggingFace æä¾›å…è´¹æ¨ç†API</p>
                    `;
                    break;
                case 'demo':
                    configHTML += `
                        <h3>æ¼”ç¤ºæ¨¡å¼</h3>
                        <p>å½“å‰ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼ï¼ŒAIå›å¤ä¸ºæ¨¡æ‹Ÿç”Ÿæˆã€‚</p>
                        <p style="color: #666;">è¦ä½“éªŒçœŸå®çš„AIå¯¹è¯ï¼Œè¯·é€‰æ‹©å…¶ä»–æœåŠ¡å¹¶é…ç½®ç›¸åº”çš„APIå¯†é’¥ã€‚</p>
                    `;
                    break;
            }
            
            configHTML += '</div>';
            
            // åˆ›å»ºæ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 10000; 
                display: flex; justify-content: center; align-items: center;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white; padding: 30px; border-radius: 16px; 
                max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;
            `;
            
            modalContent.innerHTML = configHTML + `
                <div style="text-align: right; margin-top: 20px;">
                    <button id="save-settings" style="background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-right: 10px;">ä¿å­˜</button>
                    <button id="cancel-settings" style="background: #6b7280; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">å–æ¶ˆ</button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // äº‹ä»¶å¤„ç†
            document.getElementById('save-settings').onclick = () => {
                this.saveSettings(currentProvider);
                document.body.removeChild(modal);
                this.checkAPIAvailability();
            };
            
            document.getElementById('cancel-settings').onclick = () => {
                document.body.removeChild(modal);
            };
            
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
        }
        
        saveSettings(provider) {
            switch (provider) {
                case 'siliconcloud':
                    this.apiSettings.siliconcloud.apiKey = document.getElementById('siliconcloud-key').value;
                    this.apiSettings.siliconcloud.model = document.getElementById('siliconcloud-model').value;
                    break;
                case 'openai':
                    this.apiSettings.openai.apiKey = document.getElementById('openai-key').value;
                    this.apiSettings.openai.model = document.getElementById('openai-model').value;
                    break;
                case 'claude':
                    this.apiSettings.claude.apiKey = document.getElementById('claude-key').value;
                    break;
                case 'gemini':
                    this.apiSettings.gemini.apiKey = document.getElementById('gemini-key').value;
                    break;
                case 'ollama':
                    this.apiSettings.ollama.baseURL = document.getElementById('ollama-url').value;
                    this.apiSettings.ollama.model = document.getElementById('ollama-model').value;
                    break;
                case 'huggingface':
                    this.apiSettings.huggingface.apiKey = document.getElementById('hf-key').value;
                    break;
            }
            this.saveAPISettings();
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæ¶ˆæ¯
            const successMsg = document.createElement('div');
            successMsg.className = 'success-message';
            successMsg.innerHTML = 'âœ… è®¾ç½®å·²ä¿å­˜';
            successMsg.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 10001; padding: 12px 24px; background: #10b981; color: white; border-radius: 8px;';
            document.body.appendChild(successMsg);
            setTimeout(() => document.body.removeChild(successMsg), 2000);
        }
        
        onProviderChange() {
            const provider = this.aiProvider.value;
            this.checkAPIAvailability();
            
            // æ˜¾ç¤ºåˆ‡æ¢æç¤º
            const providerNames = {
                openai: 'ChatGPT',
                claude: 'Claude', 
                gemini: 'Gemini',
                ollama: 'Ollama',
                huggingface: 'HuggingFace',
                demo: 'æ¼”ç¤ºæ¨¡å¼'
            };
            
            this.addMessage('assistant', `å·²åˆ‡æ¢åˆ° ${providerNames[provider]}ã€‚${provider !== 'demo' ? 'è¯·ç¡®ä¿å·²æ­£ç¡®é…ç½®APIè®¾ç½®ã€‚' : ''}`);
        }
        
        showModelInfo() {
            const provider = this.aiProvider.value;
            const modelInfo = {
                openai: 'ChatGPT\nâ€¢ éœ€è¦API Key (ä»˜è´¹)\nâ€¢ å¼ºå¤§çš„å¯¹è¯å’Œä»£ç èƒ½åŠ›\nâ€¢ æ”¯æŒGPT-3.5å’ŒGPT-4æ¨¡å‹',
                claude: 'Claude\nâ€¢ éœ€è¦API Key (ä»˜è´¹)\nâ€¢ Anthropicå¼€å‘çš„å®‰å…¨AI\nâ€¢ æ“…é•¿é•¿æ–‡æœ¬å¤„ç†å’Œåˆ†æ',
                gemini: 'Google Gemini\nâ€¢ å…è´¹é…é¢å¯ç”¨\nâ€¢ Googleæœ€æ–°AIæ¨¡å‹\nâ€¢ æ”¯æŒå¤šæ¨¡æ€è¾“å…¥',
                ollama: 'Ollama (æœ¬åœ°)\nâ€¢ å®Œå…¨å…è´¹å’Œç§å¯†\nâ€¢ æ”¯æŒLlamaã€Mistralç­‰å¼€æºæ¨¡å‹\nâ€¢ éœ€è¦æœ¬åœ°å®‰è£…',
                huggingface: 'HuggingFace\nâ€¢ å…è´¹æ¨ç†API\nâ€¢ å¼€æºæ¨¡å‹ç¤¾åŒº\nâ€¢ å¤šç§é¢„è®­ç»ƒæ¨¡å‹å¯é€‰',
                demo: 'æ¼”ç¤ºæ¨¡å¼\nâ€¢ æ— éœ€é…ç½®\nâ€¢ æ¨¡æ‹ŸAIå›å¤\nâ€¢ ç”¨äºåŠŸèƒ½å±•ç¤º'
            };
            
            alert(modelInfo[provider] || 'æœªçŸ¥æ¨¡å‹');
        }
        
        startVoiceInput() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.lang = 'zh-CN';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = () => {
                    this.voiceBtn.style.background = '#dc2626';
                    this.voiceBtn.textContent = 'ğŸ”´';
                };
                
                recognition.onresult = (event) => {
                    const result = event.results[0][0].transcript;
                    this.messageInput.value = result;
                    this.updateCharCount();
                };
                
                recognition.onend = () => {
                    this.voiceBtn.style.background = 'white';
                    this.voiceBtn.textContent = 'ğŸ¤';
                };
                
                recognition.start();
            } else {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½');
            }
        }
        
        handleFileUpload() {
            const files = this.fileInput.files;
            if (files.length > 0) {
                for (let file of files) {
                    if (file.type.startsWith('image/')) {
                        const provider = this.aiProvider.value;
                        if (provider === 'siliconcloud') {
                            const settings = this.apiSettings.siliconcloud;
                            
                            // æ”¯æŒå›¾ç‰‡åˆ†æçš„æ¨¡å‹åˆ—è¡¨
                            const visionModels = [
                                'THUDM/GLM-4.1V-9B-Thinking',
                                'Qwen/Qwen3-8B'
                            ];
                            
                            // æ£€æŸ¥å½“å‰æ¨¡å‹æ˜¯å¦æ”¯æŒå¤šæ¨¡æ€
                            if (!visionModels.includes(settings.model)) {
                                this.addMessage('user', `ğŸ“¸ ä¸Šä¼ äº†å›¾ç‰‡ï¼š${file.name}`);
                                this.addMessage('assistant', `æ£€æµ‹åˆ°æ‚¨ä¸Šä¼ äº†å›¾ç‰‡ï¼Œä½†å½“å‰ä½¿ç”¨çš„æ¨¡å‹ "${settings.model}" ä¸æ”¯æŒå›¾ç‰‡åˆ†æã€‚\n\nè¯·åœ¨è®¾ç½®ä¸­åˆ‡æ¢åˆ°ä»¥ä¸‹æ”¯æŒå›¾ç‰‡åˆ†æçš„æ¨¡å‹ä¹‹ä¸€ï¼š\nğŸ–¼ï¸ GLM-4.1V-9B-Thinking (è§†è§‰+æ¨ç†)\nğŸ–¼ï¸ Qwen3-8B (æœ€æ–°å¤šæ¨¡æ€)\n\nåˆ‡æ¢åå³å¯å¼€å§‹å›¾ç‰‡åˆ†æå¯¹è¯ï¼`, true);
                            } else {
                                // ç›´æ¥åˆ†æå›¾ç‰‡
                                this.addMessage('user', `ğŸ“¸ ä¸Šä¼ äº†å›¾ç‰‡ï¼š${file.name}`);
                                this.showTyping();
                                
                                // æ¨¡æ‹Ÿå›¾ç‰‡åˆ†æè¿‡ç¨‹
                                setTimeout(() => {
                                    this.hideTyping();
                                    this.addMessage('assistant', 'ğŸ–¼ï¸ å›¾ç‰‡åˆ†æåŠŸèƒ½å·²é…ç½®ï¼å½“å‰ä½¿ç”¨çš„æ˜¯æ”¯æŒå¤šæ¨¡æ€çš„æ¨¡å‹ï¼Œå¯ä»¥è¿›è¡Œå›¾ç‰‡å†…å®¹è¯†åˆ«ã€åœºæ™¯åˆ†æã€æ–‡å­—æå–ç­‰åŠŸèƒ½ã€‚\n\nğŸ’¡ æ‚¨å¯ä»¥ä¸Šä¼ å›¾ç‰‡åæé—®ï¼Œæ¯”å¦‚ï¼š\nâ€¢ "è¿™å¼ å›¾ç‰‡é‡Œæœ‰ä»€ä¹ˆï¼Ÿ"\nâ€¢ "å¸®æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªå›¾è¡¨"\nâ€¢ "æå–å›¾ç‰‡ä¸­çš„æ–‡å­—"\nâ€¢ "è¿™æ˜¯ä»€ä¹ˆåœ°æ–¹ï¼Ÿ"');
                                }, 1500);
                            }
                        } else {
                            this.addMessage('user', `ï¿½ ä¸Šä¼ äº†å›¾ç‰‡ï¼š${file.name}`);
                            this.addMessage('assistant', 'å›¾ç‰‡åˆ†æåŠŸèƒ½éœ€è¦ä½¿ç”¨ç¡…åŸºæµåŠ¨çš„å¤šæ¨¡æ€æ¨¡å‹ã€‚è¯·åœ¨è®¾ç½®ä¸­åˆ‡æ¢åˆ°ç¡…åŸºæµåŠ¨ï¼Œå¹¶é€‰æ‹©æ”¯æŒå›¾ç‰‡åˆ†æçš„æ¨¡å‹ã€‚');
                        }
                    } else {
                        this.addMessage('user', `ğŸ“ ä¸Šä¼ äº†æ–‡ä»¶ï¼š${file.name}`);
                        this.addMessage('assistant', 'ç›®å‰ä¸»è¦æ”¯æŒå›¾ç‰‡åˆ†æåŠŸèƒ½ã€‚å…¶ä»–æ–‡ä»¶ç±»å‹çš„å¤„ç†åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
                    }
                }
            }
            this.fileInput.value = '';
        }
        
        showModelInfo() {
            const provider = this.aiProvider.value;
            const modelInfo = {
                openai: 'ChatGPT (GPT-4)\nâ€¢ æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦ï¼š128K tokens\nâ€¢ æ”¯æŒå¤šæ¨¡æ€è¾“å…¥\nâ€¢ å¼ºå¤§çš„æ¨ç†èƒ½åŠ›',
                claude: 'Claude (Claude-3)\nâ€¢ æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦ï¼š200K tokens\nâ€¢ å®‰å…¨å¯é çš„ AI åŠ©æ‰‹\nâ€¢ æ“…é•¿é•¿æ–‡æœ¬å¤„ç†',
                gemini: 'Gemini Pro\nâ€¢ Google æœ€æ–°å¤šæ¨¡æ€æ¨¡å‹\nâ€¢ æ”¯æŒæ–‡æœ¬ã€å›¾åƒã€ä»£ç \nâ€¢ å®æ—¶ä¿¡æ¯è·å–',
                custom: 'è‡ªå®šä¹‰æ¨¡å‹\nâ€¢ å¯é…ç½®çš„ API æ¥å£\nâ€¢ æ”¯æŒæœ¬åœ°éƒ¨ç½²æ¨¡å‹\nâ€¢ çµæ´»çš„å‚æ•°è®¾ç½®'
            };
            
            alert(modelInfo[provider]);
        }
        
        scrollToBottom() {
            setTimeout(() => {
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }, 100);
        }
    }
    
    // åˆå§‹åŒ–åº”ç”¨
    new AIChatApp();
});</script></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/photos/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">forever</div><div class="author-info-description">this is foreverâ€™s blog , and I plan to share some photos and cs learning stories , wish can help you and make your day .</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/231220075"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/231220075" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:231220075@smail.nju.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/15/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BD%91%E7%AB%99%E7%BB%91%E5%AE%9A%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/" title="åŸŸåè§£æä¸ç½‘ç«™ç»‘å®šå®Œå…¨æŒ‡å—">åŸŸåè§£æä¸ç½‘ç«™ç»‘å®šå®Œå…¨æŒ‡å—</a><time datetime="2025-08-15T03:00:00.000Z" title="Created 2025-08-15 11:00:00">2025-08-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/13/React-vs-Vue-%E6%B7%B1%E5%BA%A6%E5%AF%B9%E5%86%B3/" title="React vs. Vueï¼šå‰ç«¯æ¡†æ¶çš„æ·±åº¦å¯¹å†³">React vs. Vueï¼šå‰ç«¯æ¡†æ¶çš„æ·±åº¦å¯¹å†³</a><time datetime="2025-08-13T08:45:00.000Z" title="Created 2025-08-13 16:45:00">2025-08-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/13/%E7%BD%91%E9%A1%B5%E6%9E%84%E5%BB%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E8%AF%A6%E8%A7%A3/" title="ğŸŒ ç½‘é¡µæ„å»ºåŸºç¡€çŸ¥è¯†è¯¦è§£">ğŸŒ ç½‘é¡µæ„å»ºåŸºç¡€çŸ¥è¯†è¯¦è§£</a><time datetime="2025-08-12T16:00:00.000Z" title="Created 2025-08-13 00:00:00">2025-08-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/12/Java%20%E6%B3%A8%E8%A7%A3/" title="Java æ³¨è§£">Java æ³¨è§£</a><time datetime="2025-08-12T08:18:13.000Z" title="Created 2025-08-12 16:18:13">2025-08-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/12/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%BB%93%E8%AF%BEproject/" title="äº‘åŸç”Ÿç»“è¯¾project">äº‘åŸç”Ÿç»“è¯¾project</a><time datetime="2025-08-12T07:52:32.000Z" title="Created 2025-08-12 15:52:32">2025-08-12</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
          </div>
          <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><span class="card-category-list-name">å­¦ä¹ è®°å½•</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"><span class="card-category-list-name">æŠ€æœ¯åˆ†äº«</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">æŠ€æœ¯å­¦ä¹ </span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E6%83%B3/"><span class="card-category-list-name">ç”Ÿæ´»éšæƒ³</span><span class="card-category-list-count">2</span></a></li>
          </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/%E4%B9%A1%E6%84%81/" style="font-size: 1.1em; color: #999">ä¹¡æ„</a> <a href="/tags/React/" style="font-size: 1.1em; color: #999">React</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.1em; color: #999">æµ‹è¯•</a> <a href="/tags/GitHub-Pages/" style="font-size: 1.1em; color: #999">GitHub Pages</a> <a href="/tags/%E5%A4%9A%E5%AA%92%E4%BD%93/" style="font-size: 1.1em; color: #999">å¤šåª’ä½“</a> <a href="/tags/Vue/" style="font-size: 1.1em; color: #999">Vue</a> <a href="/tags/%E5%9F%9F%E5%90%8D/" style="font-size: 1.1em; color: #999">åŸŸå</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.5em; color: #99a9bf">å‰ç«¯</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 1.5em; color: #99a9bf">å­¦ä¹ </a> <a href="/tags/DNS/" style="font-size: 1.1em; color: #999">DNS</a> <a href="/tags/JAVA/" style="font-size: 1.1em; color: #999">JAVA</a> <a href="/tags/%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2/" style="font-size: 1.1em; color: #999">ç½‘ç«™éƒ¨ç½²</a> <a href="/tags/git/" style="font-size: 1.1em; color: #999">git</a> <a href="/tags/rust/" style="font-size: 1.1em; color: #999">rust</a> <a href="/tags/start/" style="font-size: 1.1em; color: #999">start</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>Archives</span>
      
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              August 2025
            </span>
            <span class="card-archive-list-count">10</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/02/">
            <span class="card-archive-list-date">
              February 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Website Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article Count :</div><div class="item-count">11</div></div><div class="webinfo-item"><div class="item-name">Total Word Count :</div><div class="item-count">55.9k</div></div><div class="webinfo-item"><div class="item-name">Unique Visitors :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Page Views :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-08-22T09:07:43.090Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By forever</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>